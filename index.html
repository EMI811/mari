<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>MyLove OS</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="style.css">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2589/2589175.png">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/2589/2589175.png">
</head>
<body>

    <div id="ios-notification" class="notif-banner">
        <div class="notif-icon">‚ú®</div>
        <div class="notif-content">
            <b id="notif-title">Aviso</b>
            <p id="notif-msg">Mensaje recibido</p>
        </div>
    </div>

    <header class="navbar">
        <button id="btn-back" class="btn-apple hidden" onclick="goHome()">‚Äπ Atr√°s</button>
        <div class="spacer"></div>
        <button id="btn-settings-nav" class="btn-apple" onclick="openView('view-settings')">Ajustes</button>
    </header>

    <main id="view-home" class="view active">
        <h1 class="main-title">Hola, Amor ‚ù§Ô∏è</h1>
        <div class="settings-group">
            <div class="settings-item">
                <div style="display:flex; flex-direction:column;">
                    <span style="font-size: 11px; color: var(--ios-blue); font-weight: bold; text-transform: uppercase;">Nuestro Tiempo Juntos</span>
                    <b id="timer-display" style="font-size: 18px;">Calculando...</b>
                </div>
            </div>
        </div>

        <div class="app-grid">
            <div class="ios-card" onclick="openView('view-notes')"><span class="icon">üìù</span><span class="label">Notas</span></div>
            <div class="ios-card" onclick="openView('view-cloud')"><span class="icon">üì∏</span><span class="label">Fotos</span></div>
            <div class="ios-card" onclick="openView('view-messages')"><span class="icon">üí¨</span><span class="label">Chat</span></div>
            <div class="ios-card" onclick="openView('view-map')"><span class="icon">üìç</span><span class="label">Buscar</span></div>
            <div class="ios-card" onclick="openView('view-game-center')"><span class="icon">üéÆ</span><span class="label">Juegos</span></div>
            <div class="ios-card" onclick="openView('view-wallpaper')"><span class="icon">üé®</span><span class="label">Fondo</span></div>
        </div>
    </main>

    <section id="view-game-center" class="view">
        <h1 class="main-title">Game Arcade</h1>
        <div class="settings-group">
            <div class="settings-item" onclick="openGame('catch')"><span>üçé Catch My Love</span><span class="arrow">Jugar ‚Ä∫</span></div>
            <div class="settings-item" onclick="openGame('flappy')"><span>üê¶ Flappy Heart</span><span class="arrow">Jugar ‚Ä∫</span></div>
            <div class="settings-item" onclick="openGame('jump')"><span>‚òÅÔ∏è Love Jump</span><span class="arrow">Jugar ‚Ä∫</span></div>
        </div>
    </section>

    <section id="view-game-play" class="view">
        <div class="section-header">
            <h2 id="game-title">Juego</h2>
            <b id="game-score">Puntos: 0</b>
        </div>
        <div id="game-canvas-container" class="game-area">
            <div id="game-player">‚ù§Ô∏è</div>
            </div>
        <div style="padding:20px; text-align: center;">
            <button class="btn-save-note" id="btn-start-game">¬°Empezar!</button>
        </div>
    </section>

    <section id="view-messages" class="view">
        <div class="section-header"><h2>LoveChat</h2></div>
        <div id="chat-container" class="chat-box"></div>
        <div class="chat-input-area">
            <input type="text" id="chat-input" placeholder="Mensaje...">
            <button class="btn-send" onclick="sendMsg()">‚ÜóÔ∏è</button>
        </div>
    </section>

    <section id="view-map" class="view">
        <div class="section-header"><h2>Encu√©ntrame</h2><button class="btn-apple" onclick="compartirUbicacion()">üìç Enviar mi posici√≥n</button></div>
        <div id="map-info" style="padding: 20px; text-align: center;">
            <p id="distancia-texto">Buscando el amor...</p>
            <div id="mini-mapa">üó∫Ô∏è</div>
            <a id="link-google-maps" href="#" target="_blank" class="btn-save-note" style="display:none; text-decoration:none;">Ver en Google Maps</a>
        </div>
    </section>

    <section id="view-notes" class="view">
        <div id="notes-list-area">
            <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; padding: 20px;">
                <h2>Notas Compartidas</h2>
                <button class="btn-apple" onclick="showEditor()">Nueva +</button>
            </div>
            <div id="list-container" class="settings-group">
            </div>
        </div>
        
        <div id="notes-editor-area" class="hidden" style="padding: 20px;">
            <textarea id="notes-editor" placeholder="Escribe algo lindo..." style="width: 100%; height: 200px; border-radius: 15px; border: 1px solid #ddd; padding: 15px; font-size: 16px; margin-bottom: 20px;"></textarea>
            <button class="btn-save-note" onclick="saveNote()">Publicar Nota</button>
        </div>
    </section>

    <section id="view-settings" class="view">
        <h1 class="main-title">Ajustes</h1>
        
        <div class="settings-group">
            <div class="settings-item" style="height: auto; padding: 20px;">
                <div style="text-align: center; width: 100%;">
                    <div id="user-avatar" style="font-size: 50px; background: #e5e5ea; width: 80px; height: 80px; border-radius: 50%; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center;">üë§</div>
                    <b id="display-name" style="font-size: 20px;">Invitado</b>
                    <p id="display-role" style="color: gray; font-size: 14px; margin: 5px 0;">Perfil no configurado</p>
                    <button class="btn-apple" onclick="login()" style="font-weight: bold;">Cambiar Perfil / Entrar</button>
                </div>
            </div>
        </div>

        <div class="settings-group">
            <div class="settings-item">
                <span>Versi√≥n del OS</span>
                <span class="detail" style="color:gray">2.0.0 (Gold Edition)</span>
            </div>
            <div class="settings-item" onclick="borrarTodo()">
                <span style="color: #ff3b30;">Cerrar Sesi√≥n y Borrar Datos</span>
            </div>
        </div>

        <div class="settings-group">
            <div class="settings-item" onclick="pedirPermisoNotif()">
                <span>Activar avisos reales</span>
                <span class="arrow">‚Ä∫</span>
            </div>
             <div class="settings-item">
                <span>Notificaciones Internas</span>
                <label class="switch">
                    <input type="checkbox" id="notif-check" checked onchange="saveSetting('notif', this.checked)">
                    <span class="slider"></span>
                </label>
            </div>
        </div>
    </section>

    <section id="view-wallpaper" class="view">
        <h1 class="main-title">Fondos</h1>
        <div class="app-grid">
            <div class="wp-option" style="background:#f2f2f7; border: 1px solid #ddd;" onclick="setWP('#f2f2f7')"></div>
            <div class="wp-option" style="background:#ffdeeb;" onclick="setWP('#ffdeeb')"></div>
            <div class="wp-option" style="background:#e1f5fe;" onclick="setWP('#e1f5fe')"></div>
            <div class="wp-option" style="background:#1c1c1e;" onclick="setWP('#1c1c1e')"></div>
        </div>
    </section>

    <section id="view-cloud" class="view">
        <div class="section-header">
            <h2>Nube de Fotos</h2>
            <label class="btn-upload" style="background: var(--ios-blue); color: white; padding: 10px 20px; border-radius: 20px; cursor: pointer;">
                Subir Foto üì∏
                <input type="file" id="up-file" accept="image/*" hidden>
            </label>
        </div>
        <div id="gallery" class="gallery-grid" style="padding-top: 20px;"></div>
    </section>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="script.js"></script>
</body>
</html>