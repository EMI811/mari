<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>MyLove OS 3.0</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="style.css">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2589/2589175.png">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/2589/2589175.png">
</head>
<body>

    <div id="liquid-bg"></div>

    <div id="ios-notification" class="notif-banner">
        <div class="notif-icon">‚ú®</div>
        <div class="notif-content">
            <b id="notif-title">Aviso</b>
            <p id="notif-msg">Mensaje recibido</p>
        </div>
    </div>

    <div id="lightbox" class="hidden">
        <div class="lightbox-content">
            <img id="lightbox-img" src="">
            <div class="lightbox-controls">
                <button onclick="applyFilter()" class="btn-glass">üé® Filtro</button>
                <button onclick="closeLightbox()" class="btn-glass">Cerrar</button>
                <button onclick="deleteCurrentPhoto()" class="btn-glass red">üóëÔ∏è Borrar</button>
            </div>
        </div>
    </div>

    <header class="navbar">
        <button id="btn-back" class="btn-apple hidden" onclick="goHome()">‚Äπ Atr√°s</button>
        <div class="spacer"></div>
        <button id="btn-settings-nav" class="btn-apple" onclick="openView('view-settings')">Ajustes</button>
    </header>

    <main id="view-home" class="view active">
        <h1 class="main-title">Hola, Amor ‚ù§Ô∏è</h1>
        <div class="settings-group glass-panel">
            <div class="settings-item">
                <div style="display:flex; flex-direction:column;">
                    <span style="font-size: 11px; color: var(--ios-blue); font-weight: bold; text-transform: uppercase;">Nuestro Tiempo</span>
                    <b id="timer-display" style="font-size: 18px;">Calculando...</b>
                </div>
            </div>
        </div>

        <div class="app-grid" id="app-grid">
            <div class="ios-card glass-panel" onclick="handleAppClick('view-notes')" oncontextmenu="return false;">
                <span class="icon">üìù</span><span class="label">Notas</span>
            </div>
            <div class="ios-card glass-panel" onclick="handleAppClick('view-cloud')" oncontextmenu="return false;">
                <span class="icon">üì∏</span><span class="label">Fotos</span>
            </div>
            <div class="ios-card glass-panel" onclick="handleAppClick('view-messages')" oncontextmenu="return false;">
                <span class="icon">üí¨</span><span class="label">Chat</span>
            </div>
            <div class="ios-card glass-panel" onclick="handleAppClick('view-map')" oncontextmenu="return false;">
                <span class="icon">üìç</span><span class="label">Buscar</span>
            </div>
            <div class="ios-card glass-panel" onclick="handleAppClick('view-game-center')" oncontextmenu="return false;">
                <span class="icon">üéÆ</span><span class="label">Juegos</span>
            </div>
            <div class="ios-card glass-panel" onclick="handleAppClick('view-wallpaper')" oncontextmenu="return false;">
                <span class="icon">üé®</span><span class="label">Fondo</span>
            </div>
        </div>
        <p style="text-align:center; opacity:0.5; font-size:12px; margin-top:20px;">Mant√©n presionado para editar</p>
    </main>

    <section id="view-game-center" class="view">
        <h1 class="main-title">Arcade</h1>
        <div class="settings-group glass-panel">
            <div class="settings-item" onclick="openGame('catch')"><span>üçé Catch My Love</span><span class="arrow">‚Ä∫</span></div>
            <div class="settings-item" onclick="openGame('flappy')"><span>üê¶ Flappy Heart</span><span class="arrow">‚Ä∫</span></div>
            <div class="settings-item" onclick="openGame('jump')"><span>‚òÅÔ∏è Love Jump</span><span class="arrow">‚Ä∫</span></div>
        </div>
    </section>

    <section id="view-game-play" class="view">
        <div class="section-header glass-panel">
            <h2 id="game-title">Juego</h2>
            <b id="game-score">0</b>
        </div>
        <div id="game-canvas-container" class="game-area glass-panel">
            <div id="game-player">‚ù§Ô∏è</div>
        </div>
        <div style="padding:20px; text-align: center;">
            <button class="btn-main" id="btn-start-game">¬°Jugar!</button>
        </div>
    </section>

    <section id="view-messages" class="view">
        <div class="section-header glass-panel"><h2>Chat</h2></div>
        <div id="chat-container" class="chat-box"></div>
        <div class="chat-input-area glass-panel">
            <input type="text" id="chat-input" placeholder="Mensaje...">
            <button class="btn-send" onclick="sendMsg()">‚Üë</button>
        </div>
    </section>

    <section id="view-map" class="view">
        <div class="section-header glass-panel"><h2>Ubicaci√≥n</h2></div>
        <div id="map-info" style="padding: 20px; text-align: center;">
            <div class="glass-panel" style="padding:20px; margin-bottom:20px;">
                <p id="distancia-texto">Esperando se√±al...</p>
                <a id="link-google-maps" href="#" target="_blank" class="btn-main" style="display:none; text-decoration:none;">Abrir Mapa</a>
            </div>
            <button class="btn-main" onclick="compartirUbicacion()">üìç Enviar mi posici√≥n</button>
        </div>
    </section>

    <section id="view-notes" class="view">
        <div id="notes-list-area">
            <div class="section-header glass-panel">
                <h2>Notas</h2>
                <button class="btn-apple" onclick="showEditor()">+</button>
            </div>
            <div id="list-container" class="settings-group glass-panel" style="background:transparent; box-shadow:none;"></div>
        </div>
        
        <div id="notes-editor-area" class="hidden" style="padding: 20px;">
            <textarea id="notes-editor" class="glass-panel" placeholder="Escribe algo lindo..." style="width: 100%; height: 200px; padding: 15px; border:none;"></textarea>
            <button class="btn-main" onclick="saveNote()">Guardar</button>
        </div>
    </section>

    <section id="view-settings" class="view">
        <h1 class="main-title">Ajustes</h1>
        
        <div class="settings-group glass-panel">
            <div class="settings-item" onclick="login()">
                <div style="display:flex; align-items:center; gap:10px;">
                    <div id="user-avatar" style="background:#ddd; width:40px; height:40px; border-radius:50%; display:flex; justify-content:center; align-items:center;">üë§</div>
                    <div style="display:flex; flex-direction:column;">
                        <b id="display-name">Invitado</b>
                        <span style="font-size:12px; opacity:0.6">Toca para entrar</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="settings-group glass-panel">
            <div class="settings-item">
                <span>Modo Liquid Glass üíß</span>
                <label class="switch">
                    <input type="checkbox" id="glass-check" onchange="toggleGlassMode(this.checked)">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="settings-item" onclick="borrarTodo()">
                <span style="color: #ff3b30;">Resetear App</span>
            </div>
        </div>
    </section>

    <section id="view-wallpaper" class="view">
        <h1 class="main-title">Fondos</h1>
        <div class="app-grid">
            <div class="wp-option" style="background:#f2f2f7;" onclick="setWP('#f2f2f7')"></div>
            <div class="wp-option" style="background:#ffdeeb;" onclick="setWP('#ffdeeb')"></div>
            <div class="wp-option" style="background:#e1f5fe;" onclick="setWP('#e1f5fe')"></div>
            <div class="wp-option" style="background:linear-gradient(45deg, #ff9a9e, #fad0c4);" onclick="setWP('linear-gradient(45deg, #ff9a9e, #fad0c4)')"></div>
        </div>
    </section>

    <section id="view-cloud" class="view">
        <div class="section-header glass-panel">
            <h2>Galer√≠a</h2>
            <label class="btn-apple" style="cursor: pointer;">
                Subir +
                <input type="file" id="up-file" accept="image/*" hidden>
            </label>
        </div>
        <div id="gallery" class="gallery-grid" style="padding: 10px;"></div>
    </section>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="script.js"></script>
</body>
</html>