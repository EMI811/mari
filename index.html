<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>MyLove OS</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="ios-notification" class="notif-banner">
        <div class="notif-icon">‚ú®</div>
        <div class="notif-content">
            <b id="notif-title">Aviso</b>
            <p id="notif-msg">Mensaje recibido</p>
        </div>
    </div>

    <header class="navbar">
        <button id="btn-back" class="btn-apple hidden" onclick="goHome()">‚Äπ Atr√°s</button>
        <div class="spacer"></div>
        <button id="btn-settings-nav" class="btn-apple" onclick="openView('view-settings')">Ajustes</button>
    </header>

    <main id="view-home" class="view active">
        <h1 class="main-title">Hola, Amor ‚ù§Ô∏è</h1>
        
        <div class="settings-group" style="margin-top: 10px;">
            <div class="settings-item">
                <div style="display:flex; flex-direction:column;">
                    <span style="font-size: 11px; color: var(--ios-blue); font-weight: bold; text-transform: uppercase;">Nuestro Tiempo</span>
                    <b id="timer-display" style="font-size: 18px;">Calculando...</b>
                </div>
            </div>
        </div>

        <div class="app-grid">
            <div class="ios-card" onclick="openView('view-notes')">
                <span class="icon">üìù</span>
                <span class="label">Notas</span>
            </div>
            <div class="ios-card" onclick="openView('view-cloud')">
                <span class="icon">üì∏</span>
                <span class="label">Nube</span>
            </div>
            <div class="ios-card" onclick="openView('view-messages')">
                <span class="icon">üí¨</span>
                <span class="label">Mensajes</span>
            </div>
            <div class="ios-card" onclick="openView('view-wallpaper')">
                <span class="icon">üé®</span>
                <span class="label">Fondo</span>
            </div>
            <div class="ios-card" onclick="openView('view-map')">
                <span class="icon">üìç</span>
                <span class="label">Buscar</span>
            </div>
        </div>
    </main>

    <section id="view-settings" class="view">
        <h1 class="main-title">Ajustes</h1>
        <div class="profile-card" onclick="editProfile()">
            <div class="profile-img">üë§</div>
            <div class="profile-info">
                <b id="prof-name">Tu Nombre</b>
                <span id="prof-mail">Configurar perfil ‚Ä∫</span>
            </div>
        </div>
        <div class="settings-group">
            <div class="settings-item" onclick="updateSoftware()">
                <span>Actualizaci√≥n de software</span>
                <span class="detail">1.0.2 <span class="arrow">‚Ä∫</span></span>
            </div>
        </div>
        <div class="settings-group">
            <div class="settings-item">
                <span>Notificaciones</span>
                <label class="switch">
                    <input type="checkbox" id="notif-check" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <div class="settings-item" onclick="pedirPermisoNotif()">
                <span>Activar avisos reales</span>
                <span class="arrow">‚Ä∫</span>
            </div>
        </div>
    </section>

    <section id="view-cloud" class="view">
        <div class="section-header">
            <h2>Nuestra Nube</h2>
            <label class="btn-upload">Subir <input type="file" id="up-file" hidden accept="image/*"></label>
        </div>
        <div id="gallery" class="gallery-grid"></div>
    </section>

    <section id="view-notes" class="view">
        <div id="notes-list-area">
            <div class="section-header">
                <h2>Notas</h2>
                <button class="btn-apple" onclick="showEditor()">Nueva +</button>
            </div>
            <div id="list-container" class="notes-list"></div>
        </div>
        <div id="notes-editor-area" class="hidden">
            <textarea id="notes-editor" placeholder="Escribe algo lindo..."></textarea>
            <button class="btn-save-note" onclick="saveNote()">Listo</button>
        </div>
    </section>

    <section id="view-messages" class="view">
        <div class="section-header"><h2>LoveChat</h2></div>
        <div id="chat-container" class="chat-box"></div>
        <div class="chat-input-area">
            <input type="text" id="chat-input" placeholder="Mensaje...">
            <button class="btn-send" onclick="sendMsg()">‚ÜóÔ∏è</button>
        </div>
    </section>

    <section id="view-map" class="view">
        <div class="section-header">
            <h2>Encu√©ntrame</h2>
            <button class="btn-apple" onclick="compartirUbicacion()">üìç Enviar mi posici√≥n</button>
        </div>
        <div id="map-info" style="padding: 20px; text-align: center;">
            <p id="distancia-texto">Buscando amor...</p>
            <div id="mini-mapa" style="width: 100%; height: 250px; background: #e5e5ea; border-radius: 20px; display: flex; align-items: center; justify-content: center; font-size: 50px;">üó∫Ô∏è</div>
            <a id="link-google-maps" href="#" target="_blank" class="btn-save-note" style="display:none; text-decoration: none; margin-top:20px;">Ver en Google Maps</a>
        </div>
    </section>

    <section id="view-wallpaper" class="view">
        <h1 class="main-title">Fondos</h1>
        <div class="app-grid">
            <div class="wp-option" style="background: #f2f2f7; border: 1px solid #ccc;" onclick="setWP('#f2f2f7')"></div>
            <div class="wp-option" style="background: #ffdeeb;" onclick="setWP('#ffdeeb')"></div>
            <div class="wp-option" style="background: #e1f5fe;" onclick="setWP('#e1f5fe')"></div>
            <div class="wp-option" style="background: #1c1c1e;" onclick="setWP('#1c1c1e')"></div>
        </div>
    </section>

    <div id="setup-guide" class="modal-overlay hidden">
        <div class="guide-card">
            <div class="guide-header"><span>Instalaci√≥n</span><button onclick="closeGuide()">‚úï</button></div>
            <div class="guide-body">
                <div class="guide-icon">üì≤</div>
                <h3>Instala nuestra App</h3>
                <p>Toca <b>Compartir</b> y luego <b>"Agregar a inicio"</b>.</p>
            </div>
            <button class="btn-got-it" onclick="closeGuide()">Entendido</button>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="script.js"></script>
</body>
</html>