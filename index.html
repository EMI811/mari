<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>MyLove OS</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="ios-notification" class="notif-banner">
        <div class="notif-icon">âœ¨</div>
        <div class="notif-content">
            <b id="notif-title">Aviso</b>
            <p id="notif-msg">Mensaje recibido</p>
        </div>
    </div>

    <header class="navbar">
        <button id="btn-back" class="btn-apple hidden" onclick="goHome()">â€¹ AtrÃ¡s</button>
        <div class="spacer"></div>
        <button id="btn-settings-nav" class="btn-apple" onclick="openView('view-settings')">Ajustes</button>
    </header>

    <main id="view-home" class="view active">
        <h1 class="main-title">Hola, Amor â¤ï¸</h1>
        <div class="settings-group">
            <div class="settings-item">
                <div style="display:flex; flex-direction:column;">
                    <span style="font-size: 11px; color: var(--ios-blue); font-weight: bold; text-transform: uppercase;">Nuestro Tiempo</span>
                    <b id="timer-display" style="font-size: 18px;">Calculando...</b>
                </div>
            </div>
        </div>

        <div class="app-grid">
            <div class="ios-card" onclick="openView('view-notes')"><span class="icon">ğŸ“</span><span class="label">Notas</span></div>
            <div class="ios-card" onclick="openView('view-cloud')"><span class="icon">ğŸ“¸</span><span class="label">Nube</span></div>
            <div class="ios-card" onclick="openView('view-messages')"><span class="icon">ğŸ’¬</span><span class="label">Chat</span></div>
            <div class="ios-card" onclick="openView('view-map')"><span class="icon">ğŸ“</span><span class="label">Buscar</span></div>
            <div class="ios-card" onclick="openView('view-game-center')"><span class="icon">ğŸ®</span><span class="label">Juegos</span></div>
            <div class="ios-card" onclick="openView('view-wallpaper')"><span class="icon">ğŸ¨</span><span class="label">Fondo</span></div>
        </div>
    </main>

    <section id="view-game-center" class="view">
        <h1 class="main-title">Arcade</h1>
        <div class="settings-group">
            <div class="settings-item" onclick="openGame('catch')"><span>ğŸ Catch My Love</span><span class="arrow">â€º</span></div>
            <div class="settings-item" onclick="openGame('flappy')"><span>ğŸ¦ Flappy Heart</span><span class="arrow">â€º</span></div>
            <div class="settings-item" onclick="openGame('jump')"><span>â˜ï¸ Love Jump</span><span class="arrow">â€º</span></div>
        </div>
    </section>

    <section id="view-game-play" class="view">
        <div class="section-header">
            <h2 id="game-title">Juego</h2>
            <b id="game-score">Score: 0</b>
        </div>
        <div id="game-canvas-container" class="game-area">
            <div id="game-player">â¤ï¸</div>
        </div>
        <div style="padding:20px;"><button class="btn-save-note" id="btn-start-game">Â¡Empezar!</button></div>
    </section>

    <section id="view-messages" class="view">
        <div class="section-header"><h2>LoveChat</h2></div>
        <div id="chat-container" class="chat-box"></div>
        <div class="chat-input-area">
            <input type="text" id="chat-input" placeholder="Mensaje...">
            <button class="btn-send" onclick="sendMsg()">â†—ï¸</button>
        </div>
    </section>

    <section id="view-map" class="view">
        <div class="section-header"><h2>Localizador</h2><button class="btn-apple" onclick="compartirUbicacion()">ğŸ“ Enviar mi posiciÃ³n</button></div>
        <div id="map-info" style="padding: 20px; text-align: center;">
            <p id="distancia-texto">Buscando...</p>
            <div id="mini-mapa">ğŸ—ºï¸</div>
            <a id="link-google-maps" href="#" target="_blank" class="btn-save-note" style="display:none; text-decoration:none;">Ver en Google Maps</a>
        </div>
    </section>

    <section id="view-notes" class="view">
        <div id="notes-list-area">
            <div class="section-header"><h2>Notas</h2><button class="btn-apple" onclick="showEditor()">Nueva +</button></div>
            <div id="list-container"></div>
        </div>
        <div id="notes-editor-area" class="hidden">
            <textarea id="notes-editor" placeholder="Escribe algo lindo..."></textarea>
            <button class="btn-save-note" onclick="saveNote()">Listo</button>
        </div>
    </section>

    <section id="view-settings" class="view">
        <h1 class="main-title">Ajustes</h1>
        
        <div class="settings-group">
            <div class="settings-item" style="height: auto; padding: 20px;">
                <div style="text-align: center; width: 100%;">
                    <div id="user-avatar" style="font-size: 50px; background: #e5e5ea; width: 80px; height: 80px; border-radius: 50%; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center;">ğŸ‘¤</div>
                    <b id="display-name" style="font-size: 20px;">Invitado</b>
                    <p id="display-role" style="color: gray; font-size: 14px; margin: 5px 0;">Perfil no configurado</p>
                    <button class="btn-apple" onclick="login()" style="font-weight: bold;">Cambiar Perfil / Entrar</button>
                </div>
            </div>
        </div>

        <div class="settings-group">
            <div class="settings-item">
                <span>VersiÃ³n del OS</span>
                <span class="detail" style="color:gray">2.0.0 (Gold Edition)</span>
            </div>
            <div class="settings-item" onclick="borrarTodo()">
                <span style="color: #ff3b30;">Cerrar SesiÃ³n y Borrar Datos</span>
            </div>
        </div>

        <div class="settings-group">
            <div class="settings-item">
                <span>Notificaciones</span>
                <label class="switch">
                    <input type="checkbox" id="notif-check" checked onchange="saveSetting('notif', this.checked)">
                    <span class="slider"></span>
                </label>
            </div>
        </div>
    </section>
    <section id="view-wallpaper" class="view"><h1 class="main-title">Fondos</h1><div class="app-grid"><div class="wp-option" style="background:#f2f2f7" onclick="setWP('#f2f2f7')"></div><div class="wp-option" style="background:#ffdeeb" onclick="setWP('#ffdeeb')"></div><div class="wp-option" style="background:#1c1c1e" onclick="setWP('#1c1c1e')"></div></div></section>
    <section id="view-cloud" class="view"><div class="section-header"><h2>Nube</h2><label class="btn-upload">Subir<input type="file" id="up-file" hidden></label></div><div id="gallery" class="gallery-grid"></div></section>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="script.js"></script>
</body>
</html>